import{_ as N,u as T,r as C,c as V,o as M,a as O,b as p,d as e,w as s,e as l,f as R,E as k,g as h,h as f,t as U,i as d,j as i,k as A,v as K,p as L,l as P}from"./index-BzEWj0-9.js";const q={class:"dashboard-container"},F={class:"dashboard-title"},G={class:"user-info"},H={class:"card-title"},J={key:0,class:"loading-container"},Q={key:1,class:"empty-container"},W={key:2,class:"students-table"},X={__name:"CoachDashboard",setup(Y){const _=O(),m=T(),v=C(!1),c=C([]),b=V(()=>m.currentUser),y=a=>Array.isArray(a)?a.map(t=>y(t)):a!==null&&typeof a=="object"&&a.constructor===Object?Object.keys(a).reduce((t,o)=>{const r=o.replace(/_([a-z])/g,(g,w)=>w.toUpperCase());return t[r]=y(a[o]),t},{}):a,D=async()=>{v.value=!0;try{const a=await R.get(`/user-coaches/coach/${b.value.coachId}`);console.log("Raw students data:",a.data);const t=a.data,o=Array.isArray(t)?t:t&&t.data&&Array.isArray(t.data)?t.data:[];c.value=y(o),console.log("Camel case students data:",c.value)}catch(a){k.error("获取学员列表失败"),console.error("获取学员列表失败:",a),c.value=[{userId:1,username:"testuser",name:"测试用户",age:25,gender:"男",goal:"减脂",contact:"13800138000"}]}finally{v.value=!1}},I=a=>{_.push(`/coach/student/${a}`)},S=()=>{_.push("/coach/profile")},$=a=>{k.info(`联系学员${a.name}，联系方式：${a.contact||"未填写"}`)},x=()=>{m.logout(),_.push("/coach/login")};return M(()=>{if(!m.isAuthenticated){_.push("/coach/login");return}D()}),(a,t)=>{const o=l("el-icon"),r=l("el-button"),g=l("el-card"),w=l("el-skeleton"),z=l("el-empty"),n=l("el-table-column"),B=l("el-table");return h(),p("div",q,[e(g,{class:"dashboard-header",shadow:"hover"},{header:s(()=>[f("div",F,[e(o,null,{default:s(()=>[e(i(A))]),_:1}),t[0]||(t[0]=d(" 教练控制台 ",-1))])]),default:s(()=>{var u;return[f("div",G,[f("span",null,"欢迎您，"+U((u=b.value)==null?void 0:u.name),1),e(r,{onClick:S},{default:s(()=>[e(o,null,{default:s(()=>[e(i(A))]),_:1}),t[1]||(t[1]=d(" 我的 ",-1))]),_:1}),e(r,{type:"danger",onClick:x},{default:s(()=>[...t[2]||(t[2]=[d("退出登录",-1)])]),_:1})])]}),_:1}),e(g,{class:"students-card",shadow:"hover"},{header:s(()=>[f("div",H,[e(o,null,{default:s(()=>[e(i(P))]),_:1}),t[3]||(t[3]=d(" 我的学员列表 ",-1))])]),default:s(()=>[v.value?(h(),p("div",J,[e(w,{rows:5,animated:""})])):c.value.length===0?(h(),p("div",Q,[e(z,{description:"暂无学员"})])):(h(),p("div",W,[e(B,{data:c.value,stripe:"",style:{width:"100%"}},{default:s(()=>[e(n,{prop:"userId",label:"学员ID",width:"80"}),e(n,{prop:"username",label:"用户名",width:"120"}),e(n,{prop:"name",label:"姓名",width:"120"}),e(n,{prop:"age",label:"年龄",width:"80"}),e(n,{prop:"gender",label:"性别",width:"80"}),e(n,{prop:"goal",label:"训练目标",width:"120"}),e(n,{prop:"contact",label:"联系方式",width:"150"}),e(n,{label:"操作",width:"200"},{default:s(u=>[e(r,{type:"primary",size:"small",onClick:E=>I(u.row.userId)},{default:s(()=>[e(o,null,{default:s(()=>[e(i(K))]),_:1}),t[4]||(t[4]=d(" 查看详情 ",-1))]),_:1},8,["onClick"]),e(r,{type:"info",size:"small",onClick:E=>$(u.row)},{default:s(()=>[e(o,null,{default:s(()=>[e(i(L))]),_:1}),t[5]||(t[5]=d(" 联系学员 ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]))]),_:1})])}}},j=N(X,[["__scopeId","data-v-d25705c6"]]);export{j as default};
